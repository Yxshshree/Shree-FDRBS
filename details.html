<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Details Form</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script>
        // Function to validate Aadhar number format based on pattern (first digit check)
        function validateAadharPattern(aadhar) {
            const regex = /^\d{12}$/;  // Check if Aadhar number is exactly 12 digits
            console.log("Validating Aadhar number:", aadhar);  // Debugging log
            if (!regex.test(aadhar)) {
                console.log("Invalid Aadhar number format. Aadhar should be exactly 12 digits.");
                return false;
            }

            // Check if the first digit is within the expected range (2, 3, 7, or 8)
            if (['2', '3', '7', '8'].includes(aadhar.charAt(0))) {
                return true;
            }

            console.log("Aadhar number does not start with a valid digit.");
            return false;
        }

        // Function to handle Aadhar verification
        function verifyAadhar() {
            const aadharField = document.getElementById("aadhar");
            const aadharNumber = aadharField.value.trim();  // Remove any leading/trailing spaces
            console.log("Aadhar number entered:", aadharNumber); // Debugging log

            // Validate Aadhar number using pattern validation
            if (validateAadharPattern(aadharNumber)) {
                alert("Aadhar number verified successfully.");
                aadharField.disabled = true; // Disable the Aadhar input field after verification
                // Enable the rest of the form fields
                document.getElementById("name").disabled = false;
                document.getElementById("email").disabled = false;
                document.getElementById("phone").disabled = false;
                document.getElementById("pan").disabled = false;
                document.getElementById("address").disabled = false;
                // Enable the submit button
                document.querySelector('button[type="submit"]').disabled = false;
            } else {
                alert("Invalid Aadhar number. Please enter a valid 12-digit Aadhar number.");
            }
        }
    </script>
</head>
<body>
    <div class="container mt-5">
        <h2 class="text-center">Details Form</h2>
        <form action="/submit-details" method="POST" class="shadow p-4 rounded bg-light">
            <!-- Name Field -->
            <div class="mb-3">
                <label for="name" class="form-label">
                    <i class="fas fa-user"></i> Name
                </label>
                <input type="text" id="name" name="name" class="form-control" placeholder="Enter your name" required disabled>
            </div>
            
            <!-- Email Field -->
            <div class="mb-3">
                <label for="email" class="form-label">
                    <i class="fas fa-envelope"></i> Email
                </label>
                <input type="email" id="email" name="email" class="form-control" placeholder="Enter your email" required disabled>
            </div>
            
            <!-- Phone Field -->
            <div class="mb-3">
                <label for="phone" class="form-label">
                    <i class="fas fa-phone"></i> Phone
                </label>
                <input type="tel" id="phone" name="phone" class="form-control" placeholder="Enter your phone number" disabled>
            </div>
            
            <!-- PAN Number Field -->
            <div class="mb-3">
                <label for="pan" class="form-label">
                    <i class="fas fa-id-card"></i> PAN Number
                </label>
                <input type="text" id="pan" name="panNumber" class="form-control" placeholder="Enter your PAN number" required disabled>
            </div>
            
            <!-- Aadhar Number Field -->
            <div class="mb-3">
                <label for="aadhar" class="form-label">
                    <i class="fas fa-id-card"></i> Aadhar Number
                </label>
                <input type="text" id="aadhar" name="aadharNumber" class="form-control" placeholder="Enter your Aadhar number" required>
                <button type="button" class="btn btn-success mt-2" onclick="verifyAadhar()">Verify Aadhar</button>
            </div>
            
            <!-- Address Field -->
            <div class="mb-3">
                <label for="address" class="form-label">
                    <i class="fas fa-home"></i> Address
                </label>
                <textarea id="address" name="address" class="form-control" rows="4" placeholder="Enter your address" disabled></textarea>
            </div>
            
            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary w-100" disabled>
                <i class="fas fa-paper-plane"></i> Submit
            </button>
        </form>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
